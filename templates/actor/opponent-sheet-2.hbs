<form class="{{cssClass}}" autocomplete="off">
  {{log "opponent-v2" this}}
  <header class="sheet-header">

    <div class="opponent-image">
      {{#if editable}}
        <img src="{{data.img}}" data-edit="img" data-tooltip="Clic gauche pour sélectionner une image" />
      {{else}}
        {{#if hasImage}}
          <img class="share" src="{{actor.img}}" data-tooltip="Clic gauche pour montrer l'image" data-image="{{actor.img}}" />
        {{/if}}
      {{/if}}
    </div>

    <div class="character">
      <div class="name">
        {{#if editable}}
          <input name="name" type="text" value="{{actor.name}}" data-name="{{actor.name}}" />
        {{else}}
          <div>{{actor.name}}</div>
        {{/if}}
      </div>
      <div class="sheet-lock">
        {{#if editable}}
          <i class="fas fa-lock-open" data-tooltip="Verrouiller la fiche"></i>
        {{else}}
          <i class="fas fa-lock" data-tooltip="Déverrouiller la fiche"></i>
        {{/if}}
      </div>
    </div>

    <div class="short-description">
      {{#if editable}}<input
          class="input-editable"
          name="system.shortDescription"
          type="text"
          value="{{actor.system.shortDescription}}"
          placeholder="{{localize 'CTHACK.HitDiceShort'}}"
        />{{else}}{{actor.system.shortDescription}}{{/if}}
    </div>

    <div class="data-group hitdice">
      <label for="system.hitDice" class="resource-label resource-name" data-tooltip="{{localize 'CTHACK.HitDice'}}">{{localize "CTHACK.HitDiceShort"}} :</label>
      {{#if editable}}
        <select class="selectHitDice" name="system.hitDice" data-type="String">
          {{#select actor.system.hitDice}}
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
          {{/select}}
        </select>
      {{else}}
        <div>{{actor.system.hitDice}}</div>
      {{/if}}
    </div>

    <div class="data-group hp">
      <label for="system.hp.value" class="resource-label" data-tooltip="{{localize 'CTHACK.HitPoints'}}">{{localize "CTHACK.HitPointsShort"}} :</label>
      <div class="hp-input">
        <input class="input-editable" type="text" name="system.hp.value" value="{{actor.system.hp.value}}" data-dtype="Number" />
        /
        {{#if editable}}
          <input class="input-editable" type="text" name="system.hp.max" value="{{actor.system.hp.max}}" data-dtype="Number" />
        {{else}}
          <div class="hp-max">
            {{actor.system.hp.max}}
          </div>
        {{/if}}
      </div>
    </div>

    <div class="data-group armor">
      <label class="resource-label" data-tooltip="{{localize 'CTHACK.OpponentArmor'}}">{{localize "CTHACK.OpponentArmorShort"}} :</label>
      {{#if editable}}
        <input class="input-editable" name="system.armor" type="text" value="{{actor.system.armor}}" data-dtype="Number" />
      {{else}}
        <div>{{actor.system.armor}}</div>
      {{/if}}
    </div>

    <div class="data-group malus">
      <label class="resource-label" data-tooltip="{{localize 'CTHACK.OpponentTouchMalus'}}">{{localize "CTHACK.OpponentTouchMalusShort"}} :</label>
      {{#if editable}}
        <input class="input-editable" name="system.malus" type="text" value="{{actor.system.malus}}" data-dtype="Number" />
      {{else}}
        <div>{{actor.system.malus}}</div>
      {{/if}}
    </div>
  </header>

  {{! Sheet Body }}
  <section class="sheet-body">

    {{#if editable}}
      <div class="description-editable">
        <div class="title">{{localize "CTHACK.Description"}}</div>
        {{editor enrichedDescription target="system.description" engine="prosemirror" button=true owner=owner editable=editable}}
      </div>
    {{else}}
      <div class="description">
        {{editor enrichedDescription target="system.description" engine="prosemirror" button=true owner=owner editable=editable}}
      </div>
    {{/if}}

    {{#if editable}}
      <div class="attacks">
        <div class="title">{{localize "CTHACK.OpponentAttacks"}}
          <a class="item-control attack-create" data-tooltip="{{localize 'CTHACK.AddAttack'}}" data-type="attack"><i class="fas fa-plus"></i></a></div>
        <div class="grid-attacks">
          {{#each attacks as |attack id|}}
            <div class="item-name opponent-contextmenu" data-item-id="{{attack._id}}">{{attack.name}}</div>
            <div class="item-details opponent-contextmenu" data-item-id="{{attack._id}}">{{{attack.details}}}</div>
          {{/each}}
        </div>
      </div>
    {{else}}
      {{#if (gt attacks.length 0)}}
        <div class="attacks">
          <div class="title">{{localize "CTHACK.OpponentAttacks"}}</div>
          <div class="grid-attacks">
            {{#each attacks as |attack id|}}
              <div class="item-name opponent-contextmenu" data-item-id="{{attack._id}}">{{attack.name}}</div>
              <div class="item-details opponent-contextmenu" data-item-id="{{attack._id}}">{{{attack.details}}}</div>
            {{/each}}
          </div>
        </div>
      {{/if}}
    {{/if}}

    {{#if editable}}
      <div class="magics">
        <div class="title">{{localize "CTHACK.OpponentMagics"}}
          <a class="item-control attack-create" data-tooltip="{{localize 'CTHACK.AddMagic'}}" data-type="magic"><i class="fas fa-plus"></i></a></div>
        <div class="grid-magics">
          {{#each magics as |magic id|}}
            <div class="item-name opponent-contextmenu" data-item-id="{{magic._id}}">{{magic.name}}</div>
          {{/each}}
        </div>
      </div>
    {{else}}
      {{#if (gt magics.length 0)}}
        <div class="magics">
          <div class="title">{{localize "CTHACK.OpponentMagics"}}</div>
          <div class="grid-magics">
            {{#each magics as |magic id|}}
              <div class="item-name opponent-contextmenu" data-item-id="{{magic._id}}">{{{magic.name}}}</div>
              <div class="item-subtype opponent-contextmenu" data-item-id="{{magic._id}}">{{magic.system.subtype}}</div>
              <div class="item-dice opponent-contextmenu" data-item-id="{{magic._id}}"><i class="fas fa-dice-d20 magic rollable">&nbsp;&nbsp;</i>{{magic.system.dice}}</div>
              <div class="item-incantation opponent-contextmenu" data-item-id="{{magic._id}}">{{magic.system.incantation}}</div>
            {{/each}}
          </div>
        </div>
      {{/if}}
    {{/if}}

  </section>
</form>